{
  "phases": {
    "package": {
      "context": {
        "resources": {
          "url": "{SHA_ARCHIVE}",
          "path": "/bitnami/pinniped"
        }
      },
      "actions": [
        {
          "action_id": "helm-package"
        },
        {
          "action_id": "helm-lint"
        }
      ]
    },
    "verify": {
      "context": {
        "resources": {
          "url": "{SHA_ARCHIVE}",
          "path": "/bitnami/pinniped"
        },
        "runtime_parameters": "c3VwZXJ2aXNvcjoKICBlbmFibGVkOiB0cnVlCiAgcmJhYzoKICAgIGNyZWF0ZTogdHJ1ZQogIGV4dHJhVm9sdW1lczoKICAtIG5hbWU6IHRscwogICAgc2VjcmV0OgogICAgICBzZWNyZXROYW1lOiBwaW5uaXBlZC1zdXBlcnZpc29yLWRlZmF1bHQtdGxzLWNlcnRpZmljYXRlCiAgc2VydmljZToKICAgIHR5cGU6IExvYWRCYWxhbmNlcgogICAgcG9ydHM6CiAgICAgIGh0dHBzOiA0NDMKICBob3N0QWxpYXNlczoKICAgIC0gaXA6IDEyNy4wLjAuMQogICAgICBob3N0bmFtZXM6CiAgICAgICAgLSBwaW5uaXBlZC1zdXBlcnZpc29yCiAgaG9zdG5hbWU6IHBpbm5pcGVkLXN1cGVydmlzb3IKY29uY2llcmdlOgogIGVuYWJsZWQ6IHRydWUKICByYmFjOgogICAgY3JlYXRlOiB0cnVlCiAgcG9kTGFiZWxzOgogICAgYXBwOiAiIgpleHRyYURlcGxveToKLSB8CiAge3stICRjYSA6PSBnZW5DQSAicGlubmlwZWQtY2EiIDM2NSB9fQogIHt7LSAkcGlubmlwZWRfaG9zdG5hbWUgOj0gInBpbm5pcGVkLXN1cGVydmlzb3IiIH19CiAge3stICRwaW5uaXBlZF9jZXJ0IDo9IGdlblNpZ25lZENlcnQgJHBpbm5pcGVkX2hvc3RuYW1lIG5pbCAobGlzdCAkcGlubmlwZWRfaG9zdG5hbWUpIDM2NSAkY2EgfX0KICBhcGlWZXJzaW9uOiB2MQogIGtpbmQ6IFNlY3JldAogIG1ldGFkYXRhOgogICAgbmFtZTogcGlubmlwZWQtc3VwZXJ2aXNvci1kZWZhdWx0LXRscy1jZXJ0aWZpY2F0ZQogICAgbmFtZXNwYWNlOiB7eyBpbmNsdWRlICJjb21tb24ubmFtZXMubmFtZXNwYWNlIiAkIHwgcXVvdGUgfX0KICB0eXBlOiBrdWJlcm5ldGVzLmlvL3RscwogIGRhdGE6CiAgICB0bHMuY3J0OiB7eyAkcGlubmlwZWRfY2VydC5DZXJ0IHwgYjY0ZW5jIHwgcXVvdGUgfX0KICAgIHRscy5rZXk6IHt7ICRwaW5uaXBlZF9jZXJ0LktleSB8IGI2NGVuYyB8IHF1b3RlIH19CiAgICBjYS5jcnQ6IHt7ICRjYS5DZXJ0IHwgYjY0ZW5jIHwgcXVvdGUgfX0KICAtLS0KICB7ey0gJG9wZW5sZGFwX2hvc3RuYW1lIDo9IChwcmludGYgIm9wZW5sZGFwLiVzLnN2Yy5jbHVzdGVyLmxvY2FsIiAuUmVsZWFzZS5OYW1lc3BhY2UpIH19CiAge3stICRvcGVubGRhcF9jZXJ0IDo9IGdlblNpZ25lZENlcnQgJG9wZW5sZGFwX2hvc3RuYW1lIG5pbCAobGlzdCAkb3BlbmxkYXBfaG9zdG5hbWUpIDM2NSAkY2EgfX0KICBhcGlWZXJzaW9uOiB2MQogIGtpbmQ6IFNlY3JldAogIG1ldGFkYXRhOgogICAgbmFtZTogb3BlbmxkYXAtY2VydHMKICAgIG5hbWVzcGFjZToge3sgaW5jbHVkZSAiY29tbW9uLm5hbWVzLm5hbWVzcGFjZSIgJCB8IHF1b3RlIH19CiAgdHlwZToga3ViZXJuZXRlcy5pby90bHMKICBkYXRhOgogICAgdGxzLmNydDoge3sgJG9wZW5sZGFwX2NlcnQuQ2VydCB8IGI2NGVuYyB8IHF1b3RlIH19CiAgICB0bHMua2V5OiB7eyAkb3BlbmxkYXBfY2VydC5LZXkgfCBiNjRlbmMgfCBxdW90ZSB9fQogICAgY2EuY3J0OiB7eyAkY2EuQ2VydCB8IGI2NGVuYyB8IHF1b3RlIH19CiAgLS0tCiAgIyBSZXNvdXJjZSB0ZW1wbGF0ZXMgb2J0YWluZWQgZnJvbSBwaW5uaXBlZCBkb2MKICAjIFJlZjogaHR0cHM6Ly9waW5uaXBlZC5kZXYvZG9jcy9ob3d0by9jb25maWd1cmUtc3VwZXJ2aXNvci13aXRoLW9wZW5sZGFwLwogIGFwaVZlcnNpb246IGNvbmZpZy5zdXBlcnZpc29yLnBpbm5pcGVkLmRldi92MWFscGhhMQogIGtpbmQ6IEZlZGVyYXRpb25Eb21haW4KICBtZXRhZGF0YToKICAgIG5hbWU6IG15LXByb3ZpZGVyCiAgICBuYW1lc3BhY2U6IHt7IGluY2x1ZGUgImNvbW1vbi5uYW1lcy5uYW1lc3BhY2UiICQgfCBxdW90ZSB9fQogIHNwZWM6CiAgICBpc3N1ZXI6IGh0dHBzOi8vcGlubmlwZWQtc3VwZXJ2aXNvci9kZW1vLWlzc3VlcgogIC0tLQogICMjIFJlZjogaHR0cHM6Ly9waW5uaXBlZC5kZXYvZG9jcy9ob3d0by9jb25maWd1cmUtc3VwZXJ2aXNvci13aXRoLW9wZW5sZGFwLwogICMjCiAgYXBpVmVyc2lvbjogYXBwcy92MQogIGtpbmQ6IERlcGxveW1lbnQKICBtZXRhZGF0YToKICAgIG5hbWU6IG9wZW5sZGFwCiAgICBsYWJlbHM6CiAgICAgIGFwcDogb3BlbmxkYXAKICBzcGVjOgogICAgcmVwbGljYXM6IDEKICAgIHNlbGVjdG9yOgogICAgICBtYXRjaExhYmVsczoKICAgICAgICBhcHA6IG9wZW5sZGFwCiAgICB0ZW1wbGF0ZToKICAgICAgbWV0YWRhdGE6CiAgICAgICAgbGFiZWxzOgogICAgICAgICAgYXBwOiBvcGVubGRhcAogICAgICBzcGVjOgogICAgICAgIGNvbnRhaW5lcnM6CiAgICAgICAgICAtIG5hbWU6IG9wZW5sZGFwCiAgICAgICAgICAgIGltYWdlOiBkb2NrZXIuaW8vYml0bmFtaS9vcGVubGRhcAogICAgICAgICAgICBpbWFnZVB1bGxQb2xpY3k6IEFsd2F5cwogICAgICAgICAgICBwb3J0czoKICAgICAgICAgICAgICAtIG5hbWU6IG9wZW5sZGFwCiAgICAgICAgICAgICAgICBjb250YWluZXJQb3J0OiAxMzg5CiAgICAgICAgICAgICAgLSBuYW1lOiBvcGVubGRhcHMKICAgICAgICAgICAgICAgIGNvbnRhaW5lclBvcnQ6IDE2MzYKICAgICAgICAgICAgcmVhZGluZXNzUHJvYmU6CiAgICAgICAgICAgICAgdGNwU29ja2V0OgogICAgICAgICAgICAgICAgcG9ydDogb3BlbmxkYXAKICAgICAgICAgICAgICBpbml0aWFsRGVsYXlTZWNvbmRzOiAyCiAgICAgICAgICAgICAgdGltZW91dFNlY29uZHM6IDkwCiAgICAgICAgICAgICAgcGVyaW9kU2Vjb25kczogMgogICAgICAgICAgICAgIGZhaWx1cmVUaHJlc2hvbGQ6IDkKICAgICAgICAgICAgZW52OgogICAgICAgICAgICAgIC0gbmFtZTogTERBUF9BRE1JTl9VU0VSTkFNRQogICAgICAgICAgICAgICAgdmFsdWU6ICJhZG1pbiIKICAgICAgICAgICAgICAtIG5hbWU6IExEQVBfQURNSU5fUEFTU1dPUkQKICAgICAgICAgICAgICAgIHZhbHVlOiAiYWRtaW4xMjMiCiAgICAgICAgICAgICAgLSBuYW1lOiBMREFQX1JPT1QKICAgICAgICAgICAgICAgIHZhbHVlOiAiZGM9cGlubmlwZWQtc3VwZXJ2aXNvciIKICAgICAgICAgICAgICAtIG5hbWU6IExEQVBfVVNFUl9EQwogICAgICAgICAgICAgICAgdmFsdWU6ICJ1c2VycyIKICAgICAgICAgICAgICAtIG5hbWU6IExEQVBfVVNFUlMKICAgICAgICAgICAgICAgIHZhbHVlOiAidmlidXNlciIKICAgICAgICAgICAgICAtIG5hbWU6IExEQVBfUEFTU1dPUkRTCiAgICAgICAgICAgICAgICB2YWx1ZTogInZpYlVzZXIxMjMiCiAgICAgICAgICAgICAgLSBuYW1lOiBMREFQX0dST1VQCiAgICAgICAgICAgICAgICB2YWx1ZTogInVzZXJzIgogICAgICAgICAgICAgIC0gbmFtZTogTERBUF9FTkFCTEVfVExTCiAgICAgICAgICAgICAgICB2YWx1ZTogInllcyIKICAgICAgICAgICAgICAtIG5hbWU6IExEQVBfVExTX0NFUlRfRklMRQogICAgICAgICAgICAgICAgdmFsdWU6ICIvdmFyL2NlcnRzL3Rscy5jcnQiCiAgICAgICAgICAgICAgLSBuYW1lOiBMREFQX1RMU19LRVlfRklMRQogICAgICAgICAgICAgICAgdmFsdWU6ICIvdmFyL2NlcnRzL3Rscy5rZXkiCiAgICAgICAgICAgICAgLSBuYW1lOiBMREFQX1RMU19DQV9GSUxFCiAgICAgICAgICAgICAgICB2YWx1ZTogIi92YXIvY2VydHMvY2EuY3J0IgogICAgICAgICAgICB2b2x1bWVNb3VudHM6CiAgICAgICAgICAgICAgLSBuYW1lOiBjZXJ0cwogICAgICAgICAgICAgICAgbW91bnRQYXRoOiAvdmFyL2NlcnRzCiAgICAgICAgICAgICAgICByZWFkT25seTogdHJ1ZQogICAgICAgIHZvbHVtZXM6CiAgICAgICAgICAtIG5hbWU6IGNlcnRzCiAgICAgICAgICAgIHNlY3JldDoKICAgICAgICAgICAgICBzZWNyZXROYW1lOiBvcGVubGRhcC1jZXJ0cwogIC0tLQogIGFwaVZlcnNpb246IHYxCiAga2luZDogU2VydmljZQogIG1ldGFkYXRhOgogICAgbmFtZTogb3BlbmxkYXAKICAgIGxhYmVsczoKICAgICAgYXBwOiBvcGVubGRhcAogIHNwZWM6CiAgICB0eXBlOiBDbHVzdGVySVAKICAgIHNlbGVjdG9yOgogICAgICBhcHA6IG9wZW5sZGFwCiAgICBwb3J0czoKICAgICAgLSBwcm90b2NvbDogVENQCiAgICAgICAgcG9ydDogNjM2CiAgICAgICAgdGFyZ2V0UG9ydDogMTYzNgogICAgICAgIG5hbWU6IG9wZW5sZGFwcwogIC0tLQogIGFwaVZlcnNpb246IGlkcC5zdXBlcnZpc29yLnBpbm5pcGVkLmRldi92MWFscGhhMQogIGtpbmQ6IExEQVBJZGVudGl0eVByb3ZpZGVyCiAgbWV0YWRhdGE6CiAgICBuYW1lOiBvcGVubGRhcAogIHNwZWM6CiAgICBob3N0OiAib3BlbmxkYXAue3sgLlJlbGVhc2UuTmFtZXNwYWNlIH19LnN2Yy5jbHVzdGVyLmxvY2FsIgogICAgdGxzOgogICAgICBjZXJ0aWZpY2F0ZUF1dGhvcml0eURhdGE6IHt7ICRjYS5DZXJ0IHwgYjY0ZW5jIHwgcXVvdGUgfX0KICAgIHVzZXJTZWFyY2g6CiAgICAgIGJhc2U6ICJvdT11c2VycyxkYz1waW5uaXBlZC1zdXBlcnZpc29yIgogICAgICBmaWx0ZXI6ICImKG9iamVjdENsYXNzPWluZXRPcmdQZXJzb24pKHVpZD17fSkiCiAgICAgIGF0dHJpYnV0ZXM6CiAgICAgICAgdXNlcm5hbWU6ICJ1aWQiCiAgICAgICAgdWlkOiAidWlkTnVtYmVyIgogICAgZ3JvdXBTZWFyY2g6CiAgICAgIGJhc2U6ICJvdT11c2VycyxkYz1waW5uaXBlZC1zdXBlcnZpc29yIgogICAgICBmaWx0ZXI6ICImKG9iamVjdENsYXNzPWdyb3VwT2ZOYW1lcykobWVtYmVyPXt9KSIKICAgICAgYXR0cmlidXRlczoKICAgICAgICBncm91cE5hbWU6ICJjbiIKICAgIGJpbmQ6CiAgICAgIHNlY3JldE5hbWU6IG9wZW5sZGFwLWJpbmQtYWNjb3VudAogIC0tLQogIGFwaVZlcnNpb246IHYxCiAga2luZDogU2VjcmV0CiAgbWV0YWRhdGE6CiAgICBuYW1lOiBvcGVubGRhcC1iaW5kLWFjY291bnQKICB0eXBlOiBrdWJlcm5ldGVzLmlvL2Jhc2ljLWF1dGgKICBzdHJpbmdEYXRhOgogICAgdXNlcm5hbWU6ICJjbj1hZG1pbixkYz1waW5uaXBlZC1zdXBlcnZpc29yIgogICAgcGFzc3dvcmQ6ICJhZG1pbjEyMyIKICAtLS0KICAjIyBSZWY6IGh0dHBzOi8vcGlubmlwZWQuZGV2L2RvY3MvaG93dG8vY29uZmlndXJlLWNvbmNpZXJnZS1qd3QvCiAgIyMKICBhcGlWZXJzaW9uOiBhdXRoZW50aWNhdGlvbi5jb25jaWVyZ2UucGlubmlwZWQuZGV2L3YxYWxwaGExCiAga2luZDogSldUQXV0aGVudGljYXRvcgogIG1ldGFkYXRhOgogICAgbmFtZTogc3VwZXJ2aXNvci1qd3QtYXV0aGVudGljYXRvcgogICAgbmFtZXNwYWNlOiB7eyBpbmNsdWRlICJjb21tb24ubmFtZXMubmFtZXNwYWNlIiAkIHwgcXVvdGUgfX0KICBzcGVjOgogICAgaXNzdWVyOiAiaHR0cHM6Ly9waW5uaXBlZC1zdXBlcnZpc29yL2RlbW8taXNzdWVyIgogICAgYXVkaWVuY2U6IHZpYi1lZDlkZTMzYzM3MDk4MWY2MWU5YwogICAgdGxzOgogICAgICBjZXJ0aWZpY2F0ZUF1dGhvcml0eURhdGE6IHt7ICRjYS5DZXJ0IHwgYjY0ZW5jIHwgcXVvdGUgfX0=",
        "target_platform": {
          "target_platform_id": "{VIB_ENV_ALTERNATIVE_TARGET_PLATFORM}",
          "size": {
            "name": "S4"
          }
        }
      },
      "actions": [
        {
          "action_id": "health-check",
          "params": {
            "endpoint": "lb-pinniped-supervisor-https"
          }
        },
        {
          "action_id": "ginkgo",
          "params": {
            "resources": {
              "path": "/.vib/pinniped/ginkgo"
            },
            "params": {
              "kubeconfig": "{{kubeconfig}}",
              "namespace": "{{namespace}}",
              "auth-user": "vibuser",
              "auth-password": "vibUser123"
            }
          }
        }
      ]
    }
  }
}
